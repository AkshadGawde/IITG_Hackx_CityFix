(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{5471:(e,s,t)=>{Promise.resolve().then(t.bind(t,9076))},9076:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var a=t(5155),l=t(2115),n=t(9293),r=t(3961),i=t(8368),c=t(9708),d=t(6059),o=t(2822),x=t(2619),m=t.n(x);let h=e=>{let{label:s,value:t,color:l}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 rounded-lg shadow-sm bg-white ".concat(null!=l?l:""),children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:t}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:s})]})},u=()=>{let{currentUser:e,isLoading:s}=(0,n.A)(),[t,x]=(0,l.useState)([]),[u,g]=(0,l.useState)(!0);(0,l.useEffect)(()=>{if(!e)return;g(!0);let s=(0,c.rJ)(r.db,"issues"),t=(0,c.P)(s,(0,c.My)("createdAt","desc")),a=(0,c.aQ)(t,e=>{let s=[];e.forEach(e=>s.push({id:e.id,...e.data()})),x(s),g(!1)},()=>g(!1));return()=>a()},[e]);let b=(0,l.useMemo)(()=>({total:t.length,pending:t.filter(e=>e.status===i.A.PENDING).length,inProgress:t.filter(e=>e.status===i.A.IN_PROGRESS).length,resolved:t.filter(e=>e.status===i.A.RESOLVED).length}),[t]),j=(0,l.useCallback)(async(e,s)=>{await o.vD(e,s)},[]),f=(0,l.useCallback)(async(e,s)=>{await o.rA(e,s)},[]);return s?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("svg",{className:"animate-spin mx-auto h-10 w-10 text-brand-blue",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading..."})]})}):e&&"admin"===e.role?(0,a.jsxs)("div",{className:"min-h-screen bg-brand-gray text-brand-dark",children:[(0,a.jsx)("header",{className:"bg-white shadow-md",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Admin Dashboard"}),(0,a.jsx)(m(),{href:"/",className:"text-brand-blue hover:underline",children:"Back to App"})]})}),(0,a.jsxs)("main",{className:"container mx-auto p-4 md:p-6 lg:p-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsx)(h,{label:"Total",value:b.total}),(0,a.jsx)(h,{label:"Pending",value:b.pending}),(0,a.jsx)(h,{label:"In Progress",value:b.inProgress}),(0,a.jsx)(h,{label:"Resolved",value:b.resolved})]}),(0,a.jsx)(d.A,{issues:t,isLoading:u,currentUser:e,onStatusChange:j,onPriorityChange:f})]})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto bg-white p-6 rounded-lg shadow text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-brand-dark",children:"Admin access required"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"You must be signed in as an admin to view this page."}),(0,a.jsx)(m(),{href:"/",className:"mt-4 inline-block px-4 py-2 bg-brand-blue text-white rounded-md",children:"Go to Home"})]})})};function g(){return(0,a.jsx)(u,{})}}},e=>{e.O(0,[135,965,31,619,227,441,255,358],()=>e(e.s=5471)),_N_E=e.O()}]);